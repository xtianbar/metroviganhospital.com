<!DOCTYPE html>
<html lang="en" class="overflow-x-hidden">
<head>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Title & Description -->
  <title>Facilities | Metro Vigan Hospital</title>

  <!-- Author -->
  <meta name="author" content="Metro Vigan Hospital">
  
  <!-- Robots (SEO Indexing) -->
  <meta name="robots" content="index, follow">
  
  <!-- Meta Description -->
  <meta name="description" content="Metro Vigan Hospital is a PhilHealth-accredited Level 2 hospital in Bantay, Ilocos Sur, providing quality healthcare services with expert doctors and modern facilities." />

  <!-- Meta Keywords -->
  <meta name="keywords" content="Metro Vigan Hospital, MVH, hospital in Ilocos Sur, Bantay hospital, healthcare services, PhilHealth accredited, Ilocos Sur doctors, modern hospital facilities" />

  <!-- Open Graph (Facebook & Instagram) -->
  <meta property="og:title" content="Metro Vigan Hospital - Quality Healthcare in Ilocos Sur" />
  <meta property="og:description" content="Providing compassionate and expert medical care. Metro Vigan Hospital is a PhilHealth-accredited Level 2 hospital with modern facilities and highly skilled doctors." />
  <meta property="og:image" content="https://www.metroviganhospital.com/src/img/logo/mvh_logo.avif" />
  <meta property="og:url" content="https://www.metroviganhospital.com/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Metro Vigan Hospital" />

  <!-- icons & stylesheet -->
  <link rel="stylesheet" href="src/css/style.css">

  <link rel="icon" href="src/img/logo/favicon.ico" type="image/x-icon">

  <!-- Google Font: Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- For SEO Ranking -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "name": "Metro Vigan Hospital",
      "url": "https://www.metroviganhospital.com",
      "logo": "https://www.metroviganhospital.com/src/img/logo/mvh_logo.avif",
      "sameAs": [
        "https://www.facebook.com/MetroViganHospital",
        "https://www.instagram.com/MetroViganHospital"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+63-927-509-0414",
        "contactType": "Customer Service",
        "areaServed": "PH",
        "availableLanguage": "English"
      },
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Rizal St., Brgy. IV (Poblacion)",
        "addressLocality": "Bantay",
        "addressRegion": "Ilocos Sur",
        "postalCode": "2727",
        "addressCountry": "PH"
      }
    },
    {
      "@type": "WebSite",
      "url": "https://www.metroviganhospital.com",
      "name": "Metro Vigan Hospital",
      "description": "Metro Vigan Hospital provides world-class healthcare services in Ilocos Sur, with expert doctors, modern facilities, and patient-centered care.",
      "publisher": {
        "@type": "Organization",
        "name": "Metro Vigan Hospital",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.metroviganhospital.com/src/img/logo/mvh_logo.avif"
        }
      }
    },
    {
      "@type": "AboutPage",
      "url": "https://www.metroviganhospital.com/about",
      "name": "About Us - Metro Vigan Hospital",
      "description": "Learn about Metro Vigan Hospital, its history, vision, mission, and dedication to delivering quality healthcare services in Ilocos Sur."
    },
    {
      "@type": "JobPosting",
      "title": "Careers at Metro Vigan Hospital",
      "description": "Explore job opportunities for doctors, nurses, allied health professionals, and administrative staff at Metro Vigan Hospital.",
      "hiringOrganization": {
        "@type": "Organization",
        "name": "Metro Vigan Hospital",
        "logo": "https://www.metroviganhospital.com/src/img/logo/mvh_logo.avif",
        "sameAs": "https://www.metroviganhospital.com"
      },
      "employmentType": "FULL_TIME",
      "jobLocation": {
        "@type": "Place",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Rizal St., Brgy. IV (Poblacion)",
          "addressLocality": "Bantay",
          "addressRegion": "Ilocos Sur",
          "postalCode": "2727",
          "addressCountry": "PH"
        }
      }
    },
    {
      "@type": "WebPage",
      "url": "https://www.metroviganhospital.com/privacy-policy",
      "name": "Privacy Policy - Metro Vigan Hospital",
      "description": "Read Metro Vigan Hospital's Privacy Policy on how we collect, use, and protect patient data under the Data Privacy Act."
    },
    {
      "@type": "WebPage",
      "url": "https://www.metroviganhospital.com/terms-of-service",
      "name": "Terms of Service - Metro Vigan Hospital",
      "description": "Review the Terms of Service for using Metro Vigan Hospital’s website and medical services."
    }
  ]
}
  </script>

</head>
<body class="text-gray-800 overflow-x-hidden">

<!-- NAVBAR SECTION -->
<nav class="fixed top-0 z-50 w-full bg-white border-b shadow-md sm:px-4 md:px-6 px-10 py-2" aria-label="Main navigation">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
      
      <!-- Logo -->
      <a href="/" class="flex items-center justify-center">
        <img src="src/img/logo/mvh_logo_optimized.avif" class="h-16 mr-3" alt="MVH Logo" fetchpriority="high" loading="eager"/>
        <span class="self-center text-2xl font-semibold whitespace-nowrap hidden xl:inline">Metro Vigan Hospital</span>
        <span class="self-center text-2xl font-semibold whitespace-nowrap inline xl:hidden">MVH</span>
      </a>
  
      <!-- Toggle Button -->
      <button id="menu-toggle" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm rounded-lg lg:hidden">
        <span class="sr-only">Open main menu</span>
        <svg id="menu-icon" class="w-6 h-6 text-green hover:text-black" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
  
      <!-- Navbar Menu -->
      <div id="navbar-menu" class="hidden w-full lg:flex lg:w-auto">
        <ul class="font-medium flex flex-col p-4 text-lg lg:flex-row lg:space-x-7">
          <li><a href="/" class="block py-2 hover:underline hover:underline-offset-[0.425rem] hover:decoration-green-700">Home</a></li>
          <li><a href="/services" class="block py-2 hover:underline hover:underline-offset-[0.425rem] hover:decoration-green-700">Services</a></li>
          <li><a href="/facilities" class="block py-2 font-bold hover:underline hover:underline-offset-[0.425rem] hover:decoration-green-700 decoration-green-700 underline underline-offset-[0.425rem]">Facilities</a></li>
          <li><a href="/doctors" class="block py-2 hover:underline hover:underline-offset-[0.425rem] hover:decoration-green-700">Doctors</a></li>
          <li><a href="/about-us" class="block py-2 hover:underline hover:underline-offset-[0.425rem] hover:decoration-green-700">About Us</a></li>
          <li class="flex flex-wrap gap-4">
            <a href="https://www.labresult.metroviganhospital.com/" target="_blank" class="xl:hidden block w-full text-center text-white rounded-md bg-[#16a94c] hover:bg-[#04813b] px-6 py-2">Lab Result</a>
            <a href="index.html#contact" class="block w-full text-center text-white rounded-md bg-[#16a94c] hover:bg-[#04813b] px-6 py-2">Contact Us</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  

  <div class="mt-[10rem] md:mt-[14rem] text-center">
       <!-- HEADER -->
      <h2 class="text-4xl md:text-6xl font-bold text-gray-800 mb-10 text-center" data-aos="fade-up" data-aos-delay="100">
        Our <span class="text-green-700">Facilities</span>
    </h2>
    <p class="hidden xl:inline text-gray-800 pt-4 px-6 text-center">Click the buttons to move to a different floor</p>
    <p class="flex xl:hidden text-gray-800 pt-4 px-6 text-center justify-center">Click the buttons or swipe the interactive map to move to a different floor</p>
  </div>
  
  <section class="py-16 bg-white overflow-x-hidden">


    <div class="container mx-auto px-4 overflow-hidden">
      <!-- Floor Selector -->
      <div class="flex justify-center space-x-2 mb-2">
        <button class="floor-btn px-4 py-2 border rounded bg-green-600 text-white" data-floor="1">GF</button>
        <button class="floor-btn px-4 py-2 border rounded" data-floor="2">2F</button>
        <button class="floor-btn px-4 py-2 border rounded" data-floor="3">3F</button>
        <button class="floor-btn px-4 py-2 border rounded" data-floor="4">4F</button>
        <button class="floor-btn px-4 py-2 border rounded" data-floor="5">5F</button>
        <button class="floor-btn px-4 py-2 border rounded" data-floor="6">6F</button>
      </div>
  
      <!-- Floor Plan Container -->
      <div id="floorContainer" class="relative w-full max-w-4xl mx-auto overflow-hidden">
        <!-- Floor image and hotspots are dynamically added here -->
      </div>
      <p class="text-center gap-2">
        Tap the 
        <span class="circle-wrapper relative">
            <span class="circle-pulse cursor-default text-4xl md:text-5xl text-green-600 leading-tight">&#9679;</span>
            <span class="circle-tooltip">Hotspot Symbol</span>
        </span>
        symbol on each section to reveal room details.
      </p>
      
    </div>
  
    <!-- Modal -->
    <div id="facilityModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden z-50">
        <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 relative">
          <button id="closeModal" class="absolute top-2 right-2 text-gray-600 hover:text-black text-3xl">&times;</button>
          <h2 id="modalName" class="text-3xl font-bold mb-4"></h2>
          <div id="modalDesc" class="text-gray-700 mb-4 space-y-2"></div>
      
          <!-- Image Container -->
          <div id="modalImageWrapper" class="relative mb-4">
            <img 
              id="currentImage" 
              src="" 
              class="w-full max-h-[60vh] object-contain rounded mx-auto"
            />
            <button id="prevImage" class="absolute top-1/2 left-2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-lg">&#10094;</button>
            <button id="nextImage" class="absolute top-1/2 right-2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-lg">&#10095;</button>
          </div>
      
          <!-- Thumbnails -->
          <div id="thumbnailContainer" class="flex flex-wrap justify-center gap-2"></div>
        </div>
      </div>
      
  

  </section>
  

  <!-- FOOTER -->
  <footer class="bg-gray-50 text-gray-800">
    <div class="max-w-7xl mx-auto px-6 md:px-12 py-12 grid grid-cols-1 md:grid-cols-4 gap-10">
      
      <!-- Logo & About -->
      <div>
        <div class="flex items-center space-x-3">
          <img src="src/img/logo/mvh_logo_optimized.avif" alt="Metro Vigan Hospital Logo" class="h-12 w-auto">
          <span class="text-lg font-semibold">Metro Vigan Hospital</span>
        </div>
        <p class="mt-4 text-gray-600 text-sm leading-relaxed">
          Entrust your health to us!
        </p>
  <p class="text-gray-600 text-sm leading-relaxed">
          We Care, We Cure, We Can.
        </p>
      </div>

      <!-- Quick Links -->
      <div>
        <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
        <ul class="space-y-2 text-gray-600 text-sm">
          <li><a href="/services" class="hover:text-green-600 transition">Our Services</a></li>
          <li><a href="/facilities" class="hover:text-green-600 transition">Our Facilities</a></li>
          <li><a href="/doctors" class="hover:text-green-600 transition">Our Doctors</a></li>
          <li><a href="/about-us" class="hover:text-green-600 transition">About Us</a></li>
          <li><a href="/careers" class="hover:text-green-600 transition">Careers</a></li>
          <li><a href="https://www.labresult.metroviganhospital.com/" target="_blank" class="hover:text-[#04813b] transition">Lab Results</a></li>
          <li><a href="index.html#contact" class="hover:text-[#04813b] transition">Contact Us</a></li>
        </ul>
      </div>

      <!-- Contact Info -->
      <div>
        <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
        <ul class="space-y-3 text-gray-600 text-sm">
          <li class="flex items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26c.7.47 1.62.47 2.32 0L21 8M5 19h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2z" />
  </svg>
  <span>
    <a href="mailto:info@metroviganhospital.com?cc=marketing@metroviganhospital.com" target="_blank" class="hover:underline hover:underline-offset-2">
      info@metroviganhospital.com
    </a>
  </span>
</li>

          <li class="flex items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.95.68l1.2 3.59a1 1 0 01-.27 1.05l-2.2 2.2a16 16 0 006.59 6.59l2.2-2.2a1 1 0 011.05-.27l3.59 1.2a1 1 0 01.68.95V19a2 2 0 01-2 2h-1C9.72 21 3 14.28 3 6V5z" />
  </svg>
  <span>
    <a href="tel:+631234567890" class="hover:underline hover:underline-offset-2">
      +63 (123) 456-7890
    </a>
  </span>
</li>

          <li class="flex items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 11 7 11s7-5.75 7-11c0-3.87-3.13-7-7-7z" />
    <circle cx="12" cy="9" r="2" stroke-width="2" />
  </svg>
  <span>
    <a href="https://maps.app.goo.gl/acCeWcUGXqfhwvtcA" target="_blank" class="hover:underline hover:underline-offset-2">
      Rizal St., Brgy. IV (Poblacion), Bantay, Philippines
    </a>
  </span>
</li>

        </ul>
      </div>

      <!-- Social Media -->
      <div>
        <h3 class="text-lg font-semibold mb-4">Follow Us</h3>
        <div class="flex space-x-4">
          <!-- Facebook -->
          <a href="https://www.facebook.com/metroviganhospital" target="_blank" class="hover:text-green-600 transition" aria-label="Facebook">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-gray-600 hover:text-green-600 transition" viewBox="0 0 24 24" fill="currentColor">
    <path d="M22 12c0-5.522-4.478-10-10-10S2 6.478 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54v-2.891h2.54V9.845c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.462h-1.26c-1.243 0-1.63.772-1.63 1.562v1.875h2.773l-.443 2.891h-2.33v6.987C18.343 21.128 22 16.991 22 12z"/>
  </svg>
          </a>
          <!-- Instagram -->
          <a href="https://www.instagram.com/metroviganhospital/" target="_blank" class="hover:text-green-600 transition" aria-label="Instagram">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-gray-600 hover:text-green-600 transition" viewBox="0 0 24 24" fill="currentColor">
    <path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5a4.25 4.25 0 0 0 4.25-4.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zm5.75-.88a1.13 1.13 0 1 1-2.25 0 1.13 1.13 0 0 1 2.25 0z"/>
  </svg>
          </a>
        </div>
      </div>

    </div>

    <!-- Bottom Bar -->
    <div class="border-t border-gray-200 mt-8">
      <div class="max-w-7xl mx-auto px-6 md:px-12 py-4 flex flex-col md:flex-row justify-between items-center text-sm text-gray-500">
        <span class="p-2 text-[0.5rem] opacity-80 flex flex-wrap items-center gap-1 justify-center">website created and maintained by <a href="https://xtianbar.vercel.app/" target="_blank"><img src="src/img/logo/xtianbar-logo.avif" alt="Metro Vigan Hospital Logo" class="h-2 w-auto"></a></span>
        <p>&copy; 2025 Metro Vigan Hospital. All rights reserved.</p>
        <div class="space-x-4 mt-2 md:mt-0">
          <a href="/privacy-policy" class="hover:text-green-600 transition">Privacy Policy</a>
          <a href="/terms-of-service" class="hover:text-green-600 transition">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>
  
    <script>
    const floors = {
      1: { image: "../img/floor_plan/1.avif", hotspots: [
          { top: "40%", left: "53%", name: "PHARMACY", images: [
            "../img/facility/pharmacy.JPG", 
            "../img/facility/pharmacy-2.JPG"
          ], descriptions: [
            "Pharmacy: Dispensing medications and health products."
            ] },
          { top: "47%", left: "78%", name: "X-Ray", images: [
            "../img/facility/or.webp"
          ], descriptions: "X-Ray Department: Diagnostic imaging services." },
          { top: "80%", left: "75%", name: "Laboratory", images: [
            "../img/facility/lab_1.webp", 
            "../img/facility/lab_2.webp"
          ], descriptions: "These laboratories analyze patient samples like blood, urine, and tissue to help doctors diagnose, treat, and monitor diseases. They are equipped with advanced technology and staffed by skilled professionals who perform a wide range of tests." },
          { top: "65%", left: "92%", name: "ER", images: [
            "../img/facility/er.webp",
            "../img/facility/er_2.webp",
          ], descriptions: "The Emergency Room (ER), also known as the Emergency Department (ED) or Accident and Emergency (A&E), is a critical component of a hospital, providing immediate medical care to patients with urgent or life-threatening conditions. It is the first point of contact for individuals experiencing illnesses or injuries requiring prompt attention, often serving as a vital access point for those in crisis. " },
        ] },
      2: { image: "src/img/floor_plan/2.avif", hotspots: [
          { top: "37%", left: "4%", name: "224", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Regular Private | Php2200.00" },
          { top: "37%", left: "9.5%", name: "222", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "14.5%", name: "220", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "23%", name: "218", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "32.5%", name: "216", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "37%", name: "214", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "41.5%", name: "211", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "46%", name: "209", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Intensive Care Unit for critical patients." },
          { top: "37%", left: "53%", name: "EDP/IT", images: [
            "src/img/facility/or.webp"
          ], descriptions: "SERVER!!!!!." },
        ] },
      3: { image: "src/img/floor_plan/3.avif", hotspots: [
          { top: "45%", left: "40%", name: "OR", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Operating Room for surgeries." },
          { top: "65%", left: "60%", name: "Recovery Room", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Post-surgery patient recovery area." },
        ] },
      4: { image: "src/img/floor_plan/4.avif", hotspots: [
          { top: "35%", left: "45%", name: "Private Rooms", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Private patient rooms for in-patient care." },
        ] },
      5: { image: "src/img/floor_plan/5.avif", hotspots: [
          { top: "50%", left: "50%", name: "Suite Room", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Luxurious suite for VIP patients." },
        ] },
      6: { image: "src/img/floor_plan/6.avif", hotspots: [
          { top: "40%", left: "60%", name: "Board of Directors Office", images: [
            "src/img/facility/or.webp"
          ], descriptions: "Administrative board meeting office." },
        ] }
    };
    
// DOM elements
const floorButtons = document.querySelectorAll('.floor-btn');
const floorContainer = document.getElementById('floorContainer');
const modal = document.getElementById('facilityModal');
const modalName = document.getElementById('modalName');
const modalDesc = document.getElementById('modalDesc');
const closeModal = document.getElementById('closeModal');
const currentImageEl = document.getElementById('currentImage');
const thumbnailContainer = document.getElementById('thumbnailContainer');

let activeFloor = 1;
let currentImageIndex = 0;
let currentImages = [];

// Fade-in helper
function fadeIn(element) {
  element.style.opacity = 0;
  element.style.transition = 'opacity 0.4s ease';
  requestAnimationFrame(() => {
    element.style.opacity = 1;
  });
}

// Load floor dynamically
function loadFloor(floorNumber) {
  const floor = floors[floorNumber];
  floorContainer.innerHTML = '';

  const floorWrapper = document.createElement('div');
  floorWrapper.className = 'relative w-full';

  const floorImg = document.createElement('img');
  floorImg.src = floor.image;
  floorImg.alt = `Floor ${floorNumber}`;
  floorImg.className = 'w-full h-auto';
  floorWrapper.appendChild(floorImg);
  floorContainer.appendChild(floorWrapper);
  fadeIn(floorWrapper);

  // Add hotspots
  floor.hotspots.forEach((h) => createHotspot(h, floorWrapper));

  // Update button highlight
  floorButtons.forEach(b => b.classList.remove('bg-green-600', 'text-white'));
  document.querySelector(`.floor-btn[data-floor="${floorNumber}"]`).classList.add('bg-green-600', 'text-white');
  activeFloor = parseInt(floorNumber);
}

// Create hotspot with responsive tooltip
function createHotspot(h, wrapper) {
  const hotspot = document.createElement("div");
  hotspot.className = "hotspot absolute rounded-full cursor-pointer";

  const viewportWidth = window.innerWidth;
  let hotspotSize, tooltipFont;

  if (viewportWidth < 480) {
    hotspotSize = 12; tooltipFont = "10px";
  } else if (viewportWidth < 768) {
    hotspotSize = 16; tooltipFont = "11px";
  } else {
    hotspotSize = 24; tooltipFont = "12px";
  }

  hotspot.style.width = `${hotspotSize}px`;
  hotspot.style.height = `${hotspotSize}px`;
  hotspot.style.backgroundColor = "rgba(22, 163, 74, 0.5)";
  hotspot.style.top = h.top;
  hotspot.style.left = h.left;

  const tooltip = document.createElement("span");
  tooltip.className = "tooltip absolute bg-black text-white px-2 py-1 rounded whitespace-nowrap";
  tooltip.style.fontSize = tooltipFont;
  tooltip.style.opacity = "1";
  tooltip.textContent = h.name;
  tooltip.style.top = `-150%`;
  tooltip.style.left = `50%`;
  tooltip.style.transform = `translateX(-50%)`;

  hotspot.appendChild(tooltip);
  wrapper.appendChild(hotspot);

  requestAnimationFrame(() => adjustTooltip(tooltip));
  hotspot.addEventListener("click", () => openModal(h));
}

function adjustTooltip(tooltip) {
  const rect = tooltip.getBoundingClientRect();
  const viewportWidth = window.innerWidth;

  if (rect.top < 10) tooltip.style.top = `150%`;
  if (rect.left < 0) {
    tooltip.style.left = `0`;
    tooltip.style.transform = `translateX(0)`;
  }
  if (rect.right > viewportWidth) {
    tooltip.style.left = `100%`;
    tooltip.style.transform = `translateX(-100%)`;
  }
}

// Modal handling
function openModal(hotspot) {
  modalName.textContent = hotspot.name;
  modalDesc.innerHTML = '';

  if (Array.isArray(hotspot.descriptions)) {
    hotspot.descriptions.forEach(desc => {
      const p = document.createElement('p');
      p.textContent = desc;
      p.className = 'mb-2 text-gray-700';
      modalDesc.appendChild(p);
    });
  } else {
    modalDesc.textContent = hotspot.descriptions || "";
  }

  currentImages = hotspot.images || [];
  currentImageIndex = 0;
  if (currentImages.length > 0) currentImageEl.src = currentImages[currentImageIndex];

  generateThumbnails();
  modal.classList.remove('hidden');
}

// Swipe to close modal on mobile
let touchStartY = 0;
let touchEndY = 0;

// Close modal when tapping the background (click or tap)
modal.addEventListener('click', (e) => {
  // Only close if the background (not modal content) is clicked
  if (e.target === modal) {
    modal.classList.add('hidden');
  }
});

// Swipe to close modal (up or down)
modal.addEventListener('touchstart', (e) => {
  if (e.target !== modal) return; // only swipe on background
  touchStartY = e.changedTouches[0].screenY;
}, { passive: true });

modal.addEventListener('touchend', (e) => {
  if (e.target !== modal) return; // only swipe on background
  touchEndY = e.changedTouches[0].screenY;
  handleSwipeGesture();
});

function handleSwipeGesture() {
  const swipeDistance = touchEndY - touchStartY;

  // Close only if swipe distance is significant (50px up/down)
  if (Math.abs(swipeDistance) > 50) {
    modal.classList.add('hidden');
  }
}

// Close modal when clicking/tapping the background
modal.addEventListener('click', (e) => {
  if (e.target === modal) {
    modal.classList.add('hidden');
  }
});

function generateThumbnails() {
  thumbnailContainer.innerHTML = '';
  currentImages.forEach((img, index) => {
    const thumb = document.createElement('img');
    thumb.src = img;
    thumb.className = `w-16 h-16 object-cover rounded cursor-pointer border ${index === currentImageIndex ? 'border-green-600' : 'border-gray-300'}`;
    thumb.addEventListener('click', () => {
      currentImageIndex = index;
      updateImage();
    });
    thumbnailContainer.appendChild(thumb);
  });
}

function updateImage() {
  currentImageEl.src = currentImages[currentImageIndex];
  const thumbs = thumbnailContainer.querySelectorAll('img');
  thumbs.forEach((thumb, idx) => {
    thumb.classList.toggle('border-green-600', idx === currentImageIndex);
    thumb.classList.toggle('border-gray-300', idx !== currentImageIndex);
  });
}

closeModal.addEventListener('click', () => modal.classList.add('hidden'));

// Image slideshow buttons
document.getElementById('nextImage').addEventListener('click', () => showNextImage());
document.getElementById('prevImage').addEventListener('click', () => showPrevImage());

function showNextImage() {
  if (currentImages.length > 0) {
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    updateImage();
  }
}

function showPrevImage() {
  if (currentImages.length > 0) {
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    updateImage();
  }
}

// Modal swipe for images
const modalImageWrapper = document.getElementById('modalImageWrapper');
let touchStartX = 0, touchEndX = 0;

modalImageWrapper.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX);
modalImageWrapper.addEventListener('touchend', e => {
  touchEndX = e.changedTouches[0].screenX;
  if (touchEndX < touchStartX - 50) showNextImage();
  else if (touchEndX > touchStartX + 50) showPrevImage();
});

// Floor swipe navigation
let floorTouchStartX = 0, floorTouchEndX = 0;
floorContainer.addEventListener('touchstart', e => floorTouchStartX = e.changedTouches[0].screenX);
floorContainer.addEventListener('touchend', e => {
  floorTouchEndX = e.changedTouches[0].screenX;
  const swipeThreshold = 50;
  if (floorTouchEndX < floorTouchStartX - swipeThreshold && activeFloor < Object.keys(floors).length) {
    loadFloor(activeFloor + 1); // Swipe left → Next floor
  } 
  else if (floorTouchEndX > floorTouchStartX + swipeThreshold && activeFloor > 1) {
    loadFloor(activeFloor - 1); // Swipe right → Previous floor
  }
});

// Keyboard navigation (optional)
document.addEventListener('keydown', (e) => {
  if (!modal.classList.contains('hidden')) {
    if (e.key === 'ArrowRight') showNextImage();
    if (e.key === 'ArrowLeft') showPrevImage();
    if (e.key === 'Escape') modal.classList.add('hidden');
  } else {
    if (e.key === 'ArrowUp' && activeFloor < Object.keys(floors).length) loadFloor(activeFloor + 1);
    if (e.key === 'ArrowDown' && activeFloor > 1) loadFloor(activeFloor - 1);
  }
});

// Floor buttons
floorButtons.forEach(btn => btn.addEventListener('click', () => loadFloor(btn.dataset.floor)));

// Initialize default floor
loadFloor(activeFloor);

// Recalculate hotspots on resize
window.addEventListener('resize', () => loadFloor(activeFloor));
</script>
  

<script>
    const circleWrapper = document.querySelector(".circle-wrapper");
    const circleTooltip = document.querySelector(".circle-tooltip");
    
    circleWrapper.addEventListener("mouseenter", () => {
      requestAnimationFrame(() => {
        const rect = circleTooltip.getBoundingClientRect();
        const vw = window.innerWidth;
        const vh = window.innerHeight;
    
        // Reset to default (above)
        circleTooltip.style.bottom = "100%";
        circleTooltip.style.top = "auto";
        circleTooltip.style.left = "50%";
        circleTooltip.style.transform = "translateX(-50%)";
        circleTooltip.style.right = "auto";
        circleTooltip.style.whiteSpace = "nowrap";
        circleTooltip.style.maxWidth = "none";
        circleTooltip.style.textAlign = "center";
    
        // Flip below if too close to top
        if (rect.top < 10) {
          circleTooltip.style.top = "100%";
          circleTooltip.style.bottom = "auto";
          circleTooltip.style.transform = "translateX(-50%)";
        }
    
        // Shift right if overflowing left
        if (rect.left < 0) {
          circleTooltip.style.left = "0";
          circleTooltip.style.transform = "translateX(0)";
        }
    
        // Shift left if overflowing right
        if (rect.right > vw) {
          circleTooltip.style.left = "auto";
          circleTooltip.style.right = "0";
          circleTooltip.style.transform = "translateX(0)";
        }
      });
    });
    </script>


  <!-- icons / css -->
<script>
  const toggleBtn = document.getElementById('menu-toggle');
  const menu = document.getElementById('navbar-menu');

  toggleBtn.addEventListener('click', () => {
    menu.classList.toggle('hidden');
  });
</script>

<!-- AOS Script -->
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

<script>
    AOS.init();
</script>

</body>
</html>
